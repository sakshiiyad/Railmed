<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RailMed - Railway Medical Services</title>
    <link rel="icon" type="image/png" href="Screenshot 2025-02-28 111111.png">
    <style>
        :root {
            --primary-blue: #1B3E8C;    /* Official Indian Railways Navy Blue */
            --secondary-blue: #5A9BD5;  /* Official Indian Railways Light Blue */
            --accent-red: #e63946;     /* Medical accent red */
            --light-red: #ffd6d6;      /* Light red for hover effects */
            --light-gray: #f5f5f5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        header {
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-blue));
            color: white;
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-container h1 {
            color: white;
            font-size: 1.5rem;
            margin: 0;
            font-weight: 600;
        }

        .logo {
            width: 60px;
            height: 60px;
            transition: transform 0.3s ease;
        }

        .logo:hover {
            transform: scale(1.1);
        }

        nav {
            background-color: var(--secondary-blue);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .logo {
            height: 40px;
            width: auto;
        }

        nav ul {
            display: flex;
            gap: 1.5rem;
            list-style: none;
            margin: 0;
            padding: 0;
            align-items: center;
        }

        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            display: block;
        }

        nav a:hover {
            color: white;
            background-color: var(--primary-blue);
            transform: translateY(-2px);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .dropdown-toggle::after {
            content: '▼';
            font-size: 0.8em;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: var(--secondary-blue);
            min-width: 200px;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            padding: 0.5rem 0;
            z-index: 101;
        }

        .dropdown:hover .dropdown-menu {
            display: block;
        }

        .dropdown-menu a {
            padding: 0.7rem 1rem;
            white-space: nowrap;
        }

        .dropdown-menu a:hover {
            transform: translateX(5px);
        }

        .booking-btn {
            background-color: var(--accent-red);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
            font-size: 0.95rem;
        }

        .booking-btn:hover {
            background-color: #e63946;
            transform: translateY(-2px);
        }

        .nav-toggle {
            display: none;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            transition: transform 0.3s ease;
        }

        .nav-toggle:hover {
            transform: scale(1.1);
        }

        @media (max-width: 900px) {
            .nav-toggle {
                display: block;
            }

            nav ul {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: var(--secondary-blue);
                flex-direction: column;
                padding: 1rem;
                gap: 1rem;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }

            nav ul.show {
                display: flex;
            }

            .dropdown-menu {
                position: static;
                box-shadow: none;
                background-color: rgba(255, 255, 255, 0.1);
                margin-top: 0.5rem;
                display: none;
            }

            .dropdown.show .dropdown-menu {
                display: block;
            }

            nav a, .dropdown-toggle {
                width: 100%;
                text-align: center;
            }

            .booking-btn {
                width: 100%;
                margin-top: 0.5rem;
            }
        }

        .hero {
            background: linear-gradient(135deg, rgba(27, 62, 140, 0.95), rgba(90, 155, 213, 0.9)),
                        url('https://images.unsplash.com/photo-1527613426441-4da17471b66d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 6rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 -10px 20px rgba(0,0,0,0.1);
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at top right, rgba(230, 57, 70, 0.1), transparent 50%);
            pointer-events: none;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
            background: linear-gradient(45deg, #ffffff, #f0f0f0);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 4px 8px rgba(0,0,0,0.2);
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 1.5rem;
            color: rgba(255, 255, 255, 0.9);
        }

        .toll-free-banner {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 0.8rem;
            border-radius: 100px;
            margin: 1.5rem auto;
            max-width: 400px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: glow 2s infinite alternate;
        }

        @keyframes glow {
            from {
                box-shadow: 0 0 10px rgba(230, 57, 70, 0.3);
            }
            to {
                box-shadow: 0 0 20px rgba(230, 57, 70, 0.6);
            }
        }

        .toll-free {
            font-size: 1.3rem;
            font-weight: 700;
            color: #ff4d5a;
            text-shadow: 0 0 10px rgba(255, 77, 90, 0.3);
        }

        .hero .button-group {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            position: relative;
            z-index: 1;
        }

        .telemedicine-btn, .pharmacy-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-radius: 100px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .telemedicine-btn {
            background: #ff4d5a;
            color: white;
            border: none;
            text-decoration: none;
        }

        .telemedicine-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .telemedicine-btn:hover::before {
            transform: translateX(100%);
        }

        .telemedicine-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 77, 90, 0.4);
        }

        .pharmacy-btn {
            background: transparent;
            color: white;
            text-decoration: none;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .pharmacy-btn:hover {
            background: white;
            color: var(--primary-blue);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 255, 255, 0.3);
        }

        .telemedicine-btn i, .pharmacy-btn i {
            font-size: 0.9rem;
            transition: transform 0.3s ease;
        }

        .telemedicine-btn:hover i, .pharmacy-btn:hover i {
            transform: scale(1.2);
        }

        @media (max-width: 640px) {
            .hero h2 {
                font-size: 2rem;
            }
            .hero .button-group {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                gap: 0.8rem;
            }
            .telemedicine-btn, .pharmacy-btn {
                min-width: 160px;
            }
        }

        .services {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
            margin: 2rem;
            padding-left: 2rem;
        }

        .service-card {
            border: none;
            padding: 2.5rem;
            border-radius: 16px;
            text-align: center;
            background-color: white;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .service-card .content {
            transition: opacity 0.3s ease;
        }

        .service-details {
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 1.5rem;
            background: linear-gradient(135deg, var(--light-gray), white);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            opacity: 0;
            transform: translateY(10px);
            border-radius: 16px;
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.15);
        }

        .service-card:hover .content {
            opacity: 0;
            transform: translateY(-10px);
        }

        .service-card:hover .service-details {
            top: 0;
            opacity: 1;
            transform: translateY(0);
        }

        .service-card h3 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .service-card p {
            color: #666;
            line-height: 1.6;
        }

        .pnr-checker {
            background: linear-gradient(135deg, var(--light-gray) 0%, white 100%);
            padding: 3rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        input {
            padding: 1.2rem;
            margin: 1rem;
            font-size: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            width: 300px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.9);
        }

        input:focus {
            outline: none;
            border-color: var(--secondary-blue);
        }

        button {
            background: var(--accent-red);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 1.2rem 2.5rem;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: 0 4px 6px rgba(230, 57, 70, 0.2);
        }

        button:hover {
            background: var(--primary-blue);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(27, 62, 140, 0.25);
        }

        input:hover {
            border-color: var(--secondary-blue);
            box-shadow: 0 2px 8px rgba(90, 155, 213, 0.1);
        }

        input:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 4px 12px rgba(27, 62, 140, 0.15);
            outline: none;
            background: white;
        }

        footer {
            background: linear-gradient(to right, var(--primary-blue), var(--secondary-blue));
            color: white;
            text-align: center;
            padding: 2rem;
            margin-top: 3rem;
        }

        #result {
            margin-top: 1.5rem;
            padding: 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        #result p {
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .hero h2 {
                font-size: 2rem;
            }

            nav ul li a {
                padding: 0.3rem 0.7rem;
            }

            .service-card {
                padding: 1.5rem;
            }

            input {
                width: 100%;
                max-width: 300px;
            }
        }

        .register-btn {
            display: inline-block;
            background: var(--primary-blue);
            color: white;
            text-decoration: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            margin-top: 2rem;
            transition: all 0.3s ease;
        }

        .register-btn:hover {
            background: var(--accent-red);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .toll-free-banner {
            background: var(--accent-red);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-top: 2rem;
            display: inline-block;
        }

        .toll-free {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }

        .pharmacy-btn {
            display: inline-block;
            background: var(--accent-red);
            color: white;
            text-decoration: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            margin-top: 2rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .pharmacy-btn:hover {
            background: var(--primary-blue);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .doctor-info {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 1rem;
        }

        .doctor-info p {
            margin-bottom: 8px;
        }

        #pnr-input {
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            width: 100%;
            max-width: 300px;
            margin-right: 1rem;
        }

        #pnr-input:focus {
            outline: none;
            border-color: var(--secondary-blue);
            box-shadow: 0 0 5px rgba(90, 155, 213, 0.3);
        }

        .contact-section {
            padding: 4rem 0;
            background: var(--light-gray);
        }

        .contact-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .contact-card {
            background: white;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.4s ease, box-shadow 0.4s ease;
        }

        .contact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .contact-card h3 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
        }

        .contact-card p {
            margin-bottom: 0.5rem;
            color: #666;
        }

        .contact-card .toll-free {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-red);
            margin-top: 0.5rem;
        }

        @media (max-width: 768px) {
            .contact-grid {
                grid-template-columns: 1fr;
            }
        }

        .booking-section, .pnr-check-section {
            background: var(--light-gray);
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 15px;
        }

        #booking-form input {
            display: block;
            width: 100%;
            max-width: 400px;
            margin: 1rem auto;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
        }

        .ticket {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .booking-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 1rem 2rem;
            margin: 2rem 0;
            cursor: pointer;
            font-size: 1rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-blue) #f0f0f0;
        }

        .modal-content::-webkit-scrollbar {
            width: 8px;
        }

        .modal-content::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 4px;
        }

        .modal-content::-webkit-scrollbar-thumb {
            background-color: var(--primary-blue);
            border-radius: 4px;
        }

        .close {
            float: right;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .search-section input {
            display: block;
            width: 100%;
            margin: 1rem 0;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
        }

        .train-card {
            border: 1px solid #ddd;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            cursor: pointer;
        }

        .train-card:hover {
            background-color: var(--light-gray);
        }

        .payment-success {
            background-color: #e8f5e9;
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid #c8e6c9;
            margin-top: 1rem;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        nav .booking-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0.5rem 1rem;
            margin-left: auto; /* Pushes the button to the right */
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        nav .booking-btn:hover {
            background: var(--accent-red);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Add chatbot styles */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            display: none;
            flex-direction: column;
            z-index: 1000;
        }

        .chatbot-header {
            background: var(--primary-blue);
            color: white;
            padding: 15px;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0 5px;
        }

        .chatbot-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 80%;
            padding: 10px 15px;
            border-radius: 15px;
            margin: 5px 0;
        }

        .bot-message {
            background: var(--light-gray);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .user-message {
            background: var(--secondary-blue);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            gap: 10px;
            border-top: 1px solid #eee;
        }

        .chatbot-input input {
            flex-grow: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .chatbot-input button {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
        }

        .chatbot-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-blue);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            border: none;
            z-index: 999;
        }

        .chatbot-toggle i {
            font-size: 24px;
        }

        .hero-buttons .button {
            display: inline-block;
            padding: 0.8rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            text-decoration: none;
            border-radius: 50px;
            transition: all 0.3s ease;
            margin: 0 0.5rem;
        }
        
        .hero .cta-button {
            display: inline-block;
            padding: 0.4rem 1rem;
            font-size: 0.8rem;
            font-weight: 600;
            text-decoration: none;
            color: white;
            background: #e63946;
            border-radius: 4px;
            transition: all 0.3s ease;
            border: 2px solid #e63946;
            margin: 0.5rem;
        }

        .hero .cta-button:hover {
            background: transparent;
            color: #e63946;
            transform: translateY(-2px);
        }

        .hero .cta-button.secondary {
            background: transparent;
            border: 2px solid white;
        }

        .hero .cta-button.secondary:hover {
            background: white;
            color: #1B3E8C;
        }

        .download-btn {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: none;
            margin-top: 1rem;
        }

        .download-btn:hover {
            background-color: #218838;
            transform: translateY(-2px);
        }

        /* Enhanced booking modal styles */
        .booking-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .medical-info {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
        }

        .status-confirmed {
            color: #28a745;
            font-weight: bold;
        }

        .status-waiting {
            color: #ffc107;
            font-weight: bold;
        }

        .countdown-timer {
            background: #1B3E8C;
            color: white;
            padding: 1rem;
            border-radius: 4px;
            text-align: center;
            margin: 1rem 0;
        }

        .share-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .share-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .share-whatsapp { background: #25D366; color: white; }
        .share-email { background: #EA4335; color: white; }

        .hospital-list {
            margin-top: 1rem;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 1rem;
        }

        .hospital-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }

        /* Enhanced booking management styles */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: center;
        }
        
        .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            background: var(--primary-blue);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .cancel-btn {
            background: var(--accent-red);
        }
        
        .booking-status {
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        .detail-group {
            background: #f5f5f5;
            padding: 1rem;
            border-radius: 8px;
        }
        
        .detail-group h3 {
            color: var(--primary-blue);
            margin-bottom: 1rem;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--primary-blue);
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .share-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .share-option {
            padding: 0.8rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .share-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .share-option.whatsapp {
            background: #25D366;
            color: white;
        }
        
        .share-option.email {
            background: #EA4335;
            color: white;
        }
        
        .share-option.copy {
            background: #6c757d;
            color: white;
        }
        
        .share-btn {
            background: #4CAF50;
        }
        
        .share-btn:hover {
            background: #45a049;
        }

        .trains-container {
            display: grid;
            gap: 1.5rem;
            padding: 1rem 0;
            max-height: 70vh;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-blue) #f0f0f0;
        }

        .trains-container::-webkit-scrollbar {
            width: 8px;
        }

        .trains-container::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 4px;
        }

        .trains-container::-webkit-scrollbar-thumb {
            background-color: var(--primary-blue);
            border-radius: 4px;
        }

        .booking-form {
            display: grid;
            gap: 1.5rem;
            max-width: 600px;
            margin: 0 auto;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }

        .form-group {
            display: grid;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: bold;
            color: #333;
        }

        .form-group input,
        .form-group select {
            padding: 0.8rem;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary-blue);
            outline: none;
        }

        .occupation-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 0.5rem;
        }

        .occupation-option {
            position: relative;
            cursor: pointer;
        }

        .occupation-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .occupation-option label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.2s;
            text-align: center;
        }

        .occupation-option i {
            font-size: 1.5rem;
            color: var(--primary-blue);
        }

        .occupation-option input[type="radio"]:checked + label {
            background: var(--primary-blue);
            border-color: var(--primary-blue);
            color: white;
        }

        .occupation-option input[type="radio"]:checked + label i {
            color: white;
        }

        .occupation-option:hover label {
            border-color: var(--primary-blue);
            transform: translateY(-2px);
        }

        .booking-form button {
            padding: 1rem;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
            width: 100%;
            margin-top: 1rem;
        }

        .booking-form button:hover {
            background: #2c5282;
        }

        .search-section {
            display: grid;
            gap: 1.5rem;
            max-width: 800px;
            margin: 2rem auto;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }

        .search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .ticket-footer {
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: center;
        }

        .download-btn {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: background 0.2s;
        }

        .download-btn:hover {
            background: #2c5282;
        }

        .pnr-check-section {
            text-align: center;
            margin: 2rem auto;
            max-width: 600px;
            padding: 2rem;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }

        .pnr-check-section h2 {
            margin-bottom: 1.5rem;
        }

        .pnr-check-section input {
            padding: 0.8rem;
            width: 100%;
            max-width: 400px;
            margin-bottom: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
        }

        .pnr-check-section button {
            padding: 0.8rem 2rem;
            background: var(--primary-blue);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .pnr-check-section button:hover {
            background: #2c5282;
        }

        .contact-heading {
            text-align: center;
            margin: 2rem 0;
        }
        
        .check-availability-btn {
            background: var(--primary-blue);
            color: white;
            padding: 0.8rem 2rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .check-availability-btn:hover {
            background: #2c5282;
        }
        
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode-generator/1.4.4/qrcode.min.js"></script>
</head>
<body>
    <header>
        <nav>
            <div class="logo-container">
                <img src="Screenshot 2025-02-28 111111.png" alt="RailMed Logo" class="logo">
                <h1>RailMed</h1>
            </div>
            <button class="nav-toggle" aria-label="Toggle navigation">☰</button>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="register.html">Register</a></li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle">Others</a>
                    <div class="dropdown-menu">
                        <a href="analyzer.html">AI Analyzer</a>
                        <a href="railhealth_offline.html">Offline Kit</a>
                        <a href="pharmacy.html">Pharmacy</a>
                    </div>
                </li>
                <li><a href="#contact">Contact</a></li>
                <li><button onclick="openBookingModal()" class="booking-btn">Book Ticket</button></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <section class="hero fade-in">
            <h2>RailMed - Your Health Partner on Rails</h2>
            <p>Professional healthcare services available during your journey</p>
            <div class="toll-free-banner">
                <p>24/7 Emergency Toll-Free: <span class="toll-free">1800-1000-200</span></p>
            </div>
            <div class="button-group">
                <a href="http://localhost:3000/auth.html" class="telemedicine-btn" id="teleMedBtn">
                    <i class="fas fa-video"></i> Consult Now
                </a>
                <a href="pharmacy.html" class="pharmacy-btn">
                    <i class="fas fa-pills"></i> Pharmacy
                </a>
            </div>
        </section>

        <!-- Booking Modal -->
        <div id="booking-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeBookingModal()">&times;</span>
                <h2>Train Ticket Booking</h2>
                
                <div class="search-section">
                    <input type="text" id="from-station" placeholder="From Station">
                    <input type="text" id="to-station" placeholder="To Station">
                    <input type="date" id="travel-date">
                    <button onclick="searchTrains()">Search Trains</button>
                </div>

                <div id="train-results"></div>

                <div class="booking-form" style="display: none;">
                    <h3>Book Your Ticket</h3>
                    <input type="text" id="passenger-name" placeholder="Passenger Name">
                    <input type="number" id="passenger-age" placeholder="Passenger Age">
                    <input type="tel" id="mobile-number" placeholder="Mobile Number" pattern="[0-9]{10}" required>
                    <div class="occupation-selection">
                        <div class="occupation-option">
                            <input type="radio" id="doctor" name="occupation" value="doctor">
                            <label for="doctor">
                                <i class="fas fa-user-md"></i>
                                Doctor
                            </label>
                        </div>
                        <div class="occupation-option">
                            <input type="radio" id="not-doctor" name="occupation" value="not_doctor">
                            <label for="not-doctor">
                                <i class="fas fa-user"></i>
                                Not a Doctor
                            </label>
                        </div>
                    </div>
                    <button onclick="confirmBooking()">Confirm Booking</button>
                    <button type="button" id="downloadTicket" class="download-btn" style="display: none;">
                        Download Ticket
                    </button>
                </div>
            </div>
        </div>

        <div id="booking-confirmation-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeBookingConfirmationModal()">&times;</span>
                <h2>Booking Confirmation</h2>
                <div id="booking-confirmation-details"></div>
                <button onclick="closeBookingConfirmationModal()" class="booking-btn">Close</button>
            </div>
        </div>

        <section class="services fade-in" id="services">
            <div class="service-card">
                <div class="content">
                    <h3>RailHealth Offline Kit</h3>
                    <p>Access essential medical resources offline. Download first-aid guides, symptom checker, facility maps, and medical translations for your journey.</p>
                    <a href="railhealth_offline.html" class="cta-button">
                        <i class="fas fa-download"></i> Access Offline Kit
                    </a>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>Telemedicine</h3>
                    <p>Virtual consultations with specialists during your journey via video call</p>
                </div>
                <div class="service-details">
                    <h3>Virtual Doctor Consultation</h3>
                    <ul>
                        <li>24/7 video consultations</li>
                        <li>Secure and private calls</li>
                        <li>Chat with doctors</li>
                        <li>Digital prescriptions</li>
                    </ul>
                    <a href="telemedicine.html" class="btn">Start Consultation</a>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>Medical Assistance</h3>
                    <p>Professional medical support during your journey</p>
                    <p><strong>Available 24/7</strong></p>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>Emergency Care</h3>
                    <p>24/7 emergency medical assistance during your journey with trained medical professionals</p>
                </div>
                <div class="service-details">
                    <p><strong>Availability:</strong> All trains</p>
                    <p><strong>Response Time:</strong> Immediate</p>
                    <p><strong>Contact:</strong> 1800-1000-200</p>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>Doctor on Train</h3>
                    <p>Qualified doctors available on selected trains for immediate medical consultation</p>
                </div>
                <div class="service-details">
                    <p><strong>Availability:</strong> Selected trains</p>
                    <p><strong>Consultation Hours:</strong> 8 AM - 10 PM</p>
                    <p><strong>Location:</strong> Coach B1</p>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>First Aid Stations</h3>
                    <p>Well-equipped first aid facilities available in all trains and major stations</p>
                </div>
                <div class="service-details">
                    <p><strong>Availability:</strong> All trains and major stations</p>
                    <p><strong>Equipment:</strong> Basic first aid kit</p>
                    <p><strong>Contact:</strong> 1800-1000-200</p>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>Ambulance Service</h3>
                    <p>Quick ambulance assistance at major stations for emergency transfers</p>
                </div>
                <div class="service-details">
                    <p><strong>Availability:</strong> Major stations</p>
                    <p><strong>Response Time:</strong> 15 minutes</p>
                    <p><strong>Contact:</strong> 1800-1000-200</p>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>Pharmacy Services</h3>
                    <p>Essential medicines available at station medical stores and on selected trains</p>
                </div>
                <div class="service-details">
                    <p><strong>Availability:</strong> Station medical stores and selected trains</p>
                    <p><strong>Hours:</strong> 8 AM - 10 PM</p>
                    <p><strong>Contact:</strong> 1800-1000-200</p>
                </div>
            </div>
            <div class="service-card">
                <div class="content">
                    <h3>Medical Equipment</h3>
                    <p>Essential medical equipment like oxygen cylinders and AEDs on trains</p>
                </div>
                <div class="service-details">
                    <p><strong>Availability:</strong> Selected trains</p>
                    <p><strong>Equipment:</strong> Oxygen cylinders, AEDs</p>
                    <p><strong>Contact:</strong> 1800-1000-200</p>
                </div>
            </div>
        </section>

        <section class="pnr-checker fade-in" id="check-pnr">
            <h2>Check Doctor Availability</h2>
            <p>Enter your PNR number to check if a doctor is available on your train</p>
            <input type="text" id="pnr-input" placeholder="Enter PNR Number">
            <button class="check-availability-btn" onclick="checkDoctor()">Check Availability</button>
            <div id="result"></div>
        </section>

        <section class="pnr-check-section fade-in">
            <h2>Check Your Booking</h2>
            <input type="text" id="pnr-input-booking" placeholder="Enter PNR Number">
            <button class="check-availability-btn" onclick="checkBooking()">Check Booking</button>
            <div id="booking-details"></div>
            <button id="download-pdf" style="display: none;" onclick="downloadBookingPDF()">Download Booking Details</button>
        </section>

        <section id="contact" class="contact-section fade-in">
            <div class="container">
                <h2 class="contact-heading">Contact Us</h2>
                <div class="contact-grid">
                    <div class="contact-card">
                        <h3>Emergency Contact</h3>
                        <p>24/7 Toll Free Number:</p>
                        <p class="toll-free">1800-1000-200</p>
                    </div>
                    <div class="contact-card">
                        <h3>Email Support</h3>
                        <p>General Inquiries: info@railmed.in</p>
                        <p>Emergency Support: emergency@railmed.in</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chatbot -->
        <button class="chatbot-toggle" onclick="toggleChat()">
            <i class="fas fa-comments"></i>
        </button>

        <div class="chatbot-container" id="chatbot">
            <div class="chatbot-header">
                <h3>RailMed Assistant</h3>
                <button class="chatbot-close" onclick="toggleChat()">×</button>
            </div>
            <div class="chatbot-messages" id="chatMessages">
                <!-- Messages will be added here -->
            </div>
            <div class="chatbot-input">
                <input type="text" id="userInput" placeholder="Type your question..." onkeypress="handleKeyPress(event)">
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>

        <footer>
            <p>&copy; 2024 RailMed. All rights reserved.</p>
            <p>24/7 Toll Free: 1800-1000-200</p>
            <p>Indian Railways Medical Services</p>
        </footer>
    <script>
        // Initialize bookings from localStorage
        let bookings = JSON.parse(localStorage.getItem('bookings')) || {};

        // Debug: Log initial bookings
        console.log('Initial bookings:', bookings);

        // Ensure trains array is declared at the top and globally
        const trains = [
            { number: '12345', name: 'Rajdhani Express', from: 'Delhi', to: 'Mumbai', days: ['Mon', 'Wed', 'Fri'] },
            { number: '67890', name: 'Shatabdi Express', from: 'Chennai', to: 'Bangalore', days: ['Tue', 'Thu', 'Sat'] },
            { number: '54321', name: 'Duronto Express', from: 'Kolkata', to: 'Delhi', days: ['Sun', 'Wed', 'Fri'] },
            { number: '12346', name: 'Garib Rath Express', from: 'Mumbai', to: 'Ahmedabad', days: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'] },
            { number: '12347', name: 'Tejas Express', from: 'Mumbai', to: 'Goa', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12348', name: 'Vande Bharat Express', from: 'New Delhi', to: 'Varanasi', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12349', name: 'Gatimaan Express', from: 'Delhi', to: 'Jhansi', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12350', name: 'Humsafar Express', from: 'Jaipur', to: 'Udaipur', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12351', name: 'Double Decker Express', from: 'Mumbai', to: 'Pune', days: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'] },
            { number: '12352', name: 'Jan Shatabdi Express', from: 'Chennai', to: 'Coimbatore', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12353', name: 'Sampark Kranti Express', from: 'Delhi', to: 'Bhopal', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12354', name: 'Karnataka Express', from: 'Bangalore', to: 'Mysore', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12355', name: 'Golden Temple Mail', from: 'Mumbai', to: 'Amritsar', days: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'] },
            { number: '12356', name: 'Deccan Queen', from: 'Mumbai', to: 'Pune', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12357', name: 'Flying Ranee', from: 'Mumbai', to: 'Surat', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12358', name: 'Punjab Mail', from: 'Mumbai', to: 'Firozpur', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12359', name: 'Mumbai Rajdhani', from: 'Mumbai', to: 'Delhi', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12360', name: 'August Kranti Rajdhani', from: 'Mumbai', to: 'Delhi', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12361', name: 'Chennai Express', from: 'Chennai', to: 'Delhi', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12362', name: 'Howrah Mail', from: 'Kolkata', to: 'Mumbai', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12363', name: 'Gitanjali Express', from: 'Mumbai', to: 'Kolkata', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12364', name: 'Konark Express', from: 'Mumbai', to: 'Puri', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12365', name: 'Goa Express', from: 'Mumbai', to: 'Goa', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12366', name: 'Mumbai LTT Express', from: 'Mumbai', to: 'Lucknow', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12367', name: 'Kerala Express', from: 'Delhi', to: 'Trivandrum', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12368', name: 'Tamil Nadu Express', from: 'Delhi', to: 'Chennai', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12369', name: 'Gujarat Mail', from: 'Mumbai', to: 'Ahmedabad', days: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'] },
            { number: '12370', name: 'Mumbai Central Express', from: 'Mumbai', to: 'Jaipur', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12371', name: 'Udyan Express', from: 'Mumbai', to: 'Bangalore', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12372', name: 'Hussain Sagar Express', from: 'Mumbai', to: 'Hyderabad', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12373', name: 'Karnataka Sampark Kranti', from: 'Delhi', to: 'Bangalore', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12374', name: 'Mysore Express', from: 'Chennai', to: 'Mysore', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12375', name: 'Coimbatore Express', from: 'Chennai', to: 'Coimbatore', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12376', name: 'Nilgiri Express', from: 'Chennai', to: 'Ooty', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12377', name: 'Palakkad Express', from: 'Chennai', to: 'Palakkad', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12378', name: 'Kanyakumari Express', from: 'Chennai', to: 'Kanyakumari', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12379', name: 'Rameswaram Express', from: 'Chennai', to: 'Rameswaram', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12380', name: 'Madurai Express', from: 'Chennai', to: 'Madurai', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12381', name: 'Tirupati Express', from: 'Chennai', to: 'Tirupati', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12382', name: 'Vellore Express', from: 'Chennai', to: 'Vellore', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12383', name: 'Pondicherry Express', from: 'Chennai', to: 'Pondicherry', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12384', name: 'Salem Express', from: 'Chennai', to: 'Salem', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12385', name: 'Erode Express', from: 'Chennai', to: 'Erode', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12386', name: 'Tirunelveli Express', from: 'Chennai', to: 'Tirunelveli', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12387', name: 'Nagercoil Express', from: 'Chennai', to: 'Nagercoil', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12388', name: 'Thanjavur Express', from: 'Chennai', to: 'Thanjavur', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
           
            { number: '12389', name: 'Kumbakonam Express', from: 'Chennai', to: 'Kumbakonam', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12390', name: 'Mayiladuthurai Express', from: 'Chennai', to: 'Mayiladuthurai', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12391', name: 'Nagapattinam Express', from: 'Chennai', to: 'Nagapattinam', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12392', name: 'Karaikal Express', from: 'Chennai', to: 'Karaikal', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12393', name: 'Cuddalore Express', from: 'Chennai', to: 'Cuddalore', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12394', name: 'Villupuram Express', from: 'Chennai', to: 'Villupuram', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12395', name: 'Tiruvannamalai Express', from: 'Chennai', to: 'Tiruvannamalai', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12396', name: 'Vellore Cantonment Express', from: 'Chennai', to: 'Vellore Cantonment', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12397', name: 'Arakkonam Express', from: 'Chennai', to: 'Arakkonam', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12398', name: 'Kanchipuram Express', from: 'Chennai', to: 'Kanchipuram', days: ['Mon', 'Wed', 'Fri', 'Sun'] },
            { number: '12399', name: 'Chengalpattu Express', from: 'Chennai', to: 'Chengalpattu', days: ['Tue', 'Thu', 'Sat'] },
            { number: '12400', name: 'Tiruttani Express', from: 'Chennai', to: 'Tiruttani', days: ['Mon', 'Wed', 'Fri', 'Sun'] }
        ];

        // Modal functions
        function openBookingModal() {
            document.getElementById('booking-modal').style.display = 'block';
        }

        function closeBookingModal() {
            document.getElementById('booking-modal').style.display = 'none';
            resetModal();
        }

        function resetModal() {
            document.getElementById('train-results').innerHTML = '';
            document.querySelector('.booking-form').style.display = 'none';
        }

        // Search trains
        function searchTrains() {
            const from = document.getElementById('from-station').value.toLowerCase();
            const to = document.getElementById('to-station').value.toLowerCase();
            const dateInput = document.getElementById('travel-date').value;

            if (!from || !to || !dateInput) {
                alert('Please fill all fields');
                return;
            }

            const date = new Date(dateInput);
            if (isNaN(date)) {
                alert('Invalid date');
                return;
            }

            const day = date.toLocaleString('en-US', { weekday: 'short' });
            const availableTrains = trains.filter(train => 
                train.from.toLowerCase() === from &&
                train.to.toLowerCase() === to &&
                train.days.includes(day)
            );

            displayTrainResults(availableTrains);
        }

        function displayTrainResults(trains) {
            const resultsDiv = document.getElementById('train-results');
            if (trains.length > 0) {
                resultsDiv.innerHTML = `
                    <h3 class="section-title">Available Trains</h3>
                    <div class="trains-container">
                        ${trains.map(train => `
                            <div class="train-card" onclick="selectTrain('${train.number}')">
                                <div class="train-card-header">
                                    <div class="train-main-info">
                                        <h4>${train.name}</h4>
                                        <span class="train-number">#${train.number}</span>
                                    </div>
                                    <div class="train-schedule">
                                        <div class="schedule-item">
                                            <i class="fas fa-circle departure"></i>
                                            <div class="time-station">
                                                <div class="station">${train.from}</div>
                                                <div class="time">06:00</div>
                                            </div>
                                        </div>
                                        <div class="journey-line">
                                            <i class="fas fa-train"></i>
                                        </div>
                                        <div class="schedule-item">
                                            <i class="fas fa-circle arrival"></i>
                                            <div class="time-station">
                                                <div class="station">${train.to}</div>
                                                <div class="time">09:00</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="train-card-body">
                                    <div class="train-info-grid">
                                        <div class="info-item">
                                            <i class="fas fa-clock"></i>
                                            <span>3h Journey</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-calendar"></i>
                                            <span>Runs on: ${train.days.join(', ')}</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-wheelchair"></i>
                                            <span>Wheelchair</span>
                                        </div>
                                        <div class="info-item">
                                            <i class="fas fa-utensils"></i>
                                            <span>Food Service</span>
                                        </div>
                                    </div>
                                    <div class="train-card-footer">
                                        <div class="seats-info">
                                            <span class="availability available">Available</span>
                                            <span class="seat-count">23 seats left</span>
                                        </div>
                                        <button class="select-train-btn">
                                            Select Train <i class="fas fa-chevron-right"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            } else {
                resultsDiv.innerHTML = `
                    <div class="no-trains">
                        <i class="fas fa-train-subway"></i>
                        <p>No trains available for this route and date</p>
                        <button onclick="resetSearch()" class="retry-search">
                            Try Different Date
                        </button>
                    </div>
                `;
            }

            // Add styles for train results
            const trainStyles = document.createElement('style');
            trainStyles.textContent = `
                .trains-container {
                    display: grid;
                    gap: 1.5rem;
                    padding: 1rem 0;
                    max-height: 70vh;
                    overflow-y: auto;
                    scrollbar-width: thin;
                    scrollbar-color: var(--primary-blue) #f0f0f0;
                }

                .trains-container::-webkit-scrollbar {
                    width: 8px;
                }

                .trains-container::-webkit-scrollbar-track {
                    background: #f0f0f0;
                    border-radius: 4px;
                }

                .trains-container::-webkit-scrollbar-thumb {
                    background-color: var(--primary-blue);
                    border-radius: 4px;
                }

                .train-card {
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 2px 12px rgba(0,0,0,0.1);
                    overflow: hidden;
                    transition: transform 0.2s, box-shadow 0.2s;
                    cursor: pointer;
                }

                .train-card:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 4px 15px rgba(0,0,0,0.15);
                }

                .train-card-header {
                    padding: 1.5rem;
                    background: linear-gradient(135deg, var(--primary-blue) 0%, #2c5282 100%);
                    color: white;
                }

                .train-main-info {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    margin-bottom: 1rem;
                }

                .train-main-info h4 {
                    margin: 0;
                    font-size: 1.2rem;
                }

                .train-number {
                    background: rgba(255,255,255,0.2);
                    padding: 0.3rem 0.8rem;
                    border-radius: 20px;
                    font-size: 0.9rem;
                }

                .train-schedule {
                    display: grid;
                    grid-template-columns: auto 1fr auto;
                    gap: 1rem;
                    align-items: center;
                }

                .schedule-item {
                    display: flex;
                    align-items: center;
                    gap: 0.8rem;
                }

                .schedule-item i {
                    font-size: 0.8rem;
                }

                .departure { color: #4CAF50; }
                .arrival { color: #F44336; }

                .journey-line {
                    position: relative;
                    height: 2px;
                    background: rgba(255,255,255,0.3);
                }

                .journey-line i {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    color: white;
                    font-size: 1.2rem;
                }

                .time-station {
                    font-size: 0.9rem;
                }

                .station {
                    font-weight: bold;
                }

                .time {
                    color: rgba(255,255,255,0.8);
                    font-size: 0.8rem;
                }

                .train-card-body {
                    padding: 1.5rem;
                }

                .train-info-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 1rem;
                    margin-bottom: 1.5rem;
                }

                .info-item {
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: #666;
                    font-size: 0.9rem;
                }

                .train-card-footer {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding-top: 1rem;
                    border-top: 1px solid #eee;
                }

                .seats-info {
                    display: flex;
                    flex-direction: column;
                    gap: 0.3rem;
                }

                .availability {
                    font-weight: bold;
                    color: #4CAF50;
                }

                .seat-count {
                    font-size: 0.9rem;
                    color: #666;
                }

                .select-train-btn {
                    background: var(--primary-blue);
                    color: white;
                    border: none;
                    padding: 0.8rem 1.5rem;
                    border-radius: 6px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    transition: background 0.2s;
                }

                .select-train-btn:hover {
                    background: #2c5282;
                }

                .no-trains {
                    text-align: center;
                    padding: 3rem;
                    color: #666;
                }

                .no-trains i {
                    font-size: 3rem;
                    color: var(--primary-blue);
                    margin-bottom: 1rem;
                }

                .retry-search {
                    margin-top: 1rem;
                    padding: 0.8rem 1.5rem;
                    background: var(--primary-blue);
                    color: white;
                    border: none;
                    border-radius: 6px;
                    cursor: pointer;
                }

                @media (max-width: 768px) {
                    .train-info-grid {
                        grid-template-columns: 1fr;
                    }
                }
            `;
            document.head.appendChild(trainStyles);
        }

        function resetSearch() {
            document.querySelector('.search-section').style.display = 'block';
            document.querySelector('.booking-form').style.display = 'none';
            document.getElementById('train-results').innerHTML = '';
        }

        // Booking process
        let selectedTrain = null;

        function selectTrain(trainNumber) {
            selectedTrain = trains.find(train => train.number === trainNumber);
            document.querySelector('.search-section').style.display = 'none';
            document.querySelector('.booking-form').style.display = 'block';
        }

        function confirmBooking() {
            const name = document.getElementById('passenger-name').value;
            const age = document.getElementById('passenger-age').value;
            const mobile = document.getElementById('mobile-number').value;
            const occupation = document.querySelector('input[name="occupation"]:checked').value;

            if (name && age && mobile && selectedTrain && occupation) {
                // Validate mobile number
                if (!/^\d{10}$/.test(mobile)) {
                    alert('Please enter a valid 10-digit mobile number');
                    return;
                }

                const pnr = generatePNR();
                const coach = 'B' + Math.floor(Math.random() * 10 + 1);
                const seat = Math.floor(Math.random() + 100 + 1);

                // Create booking object with mobile number
                const booking = {
                    pnr,
                    name,
                    age,
                    mobile,
                    occupation,
                    train: selectedTrain,
                    coach,
                    seat,
                    date: document.getElementById('travel-date').value,
                    trainNumber: selectedTrain.number
                };

                // Store booking
                bookings[pnr] = booking;
                localStorage.setItem('bookings', JSON.stringify(bookings));

                // Close booking modal
                closeBookingModal();

                // Show confirmation modal with booking details
                showBookingConfirmation(booking);
            } else {
                alert('Please fill all details');
            }
        }

        function generatePNR() {
            return Math.floor(1000000000 + Math.random() * 9000000000).toString();
        }

        function showBookingConfirmation(booking) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.id = 'booking-confirmation-modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 800px;">
                    <span class="close" onclick="closeBookingConfirmationModal()">&times;</span>
                    <h2>Booking Confirmation</h2>
                    <div id="booking-confirmation-details">
                        <div class="booking-details">
                            <div class="detail-group">
                                <h3>Passenger Information</h3>
                                <p><strong>Name:</strong> ${booking.name}</p>
                                <p><strong>Age:</strong> ${booking.age}</p>
                                <p><strong>Mobile:</strong> ${booking.mobile}</p>
                                <p><strong>Occupation:</strong> ${booking.occupation}</p>
                            </div>
                            <div class="detail-group">
                                <h3>Journey Information</h3>
                                <p><strong>PNR:</strong> ${booking.pnr}</p>
                                <p><strong>Train:</strong> ${booking.train.name}</p>
                                <p><strong>Train Number:</strong> ${booking.train.number}</p>
                                <p><strong>From:</strong> ${booking.train.from}</p>
                                <p><strong>To:</strong> ${booking.train.to}</p>
                                <p><strong>Date:</strong> ${booking.date}</p>
                                <p><strong>Coach:</strong> ${booking.coach}</p>
                                <p><strong>Seat:</strong> ${booking.seat}</p>
                                <p><strong>Status:</strong> <span class="booking-status">Confirmed</span></p>
                            </div>
                        </div>
                        <div class="action-buttons" style="margin-top: 20px;">
                            <button onclick="downloadBookingPDF('${booking.pnr}')" class="action-btn">
                                <i class="fas fa-download"></i> Download Ticket
                            </button>
                            <button onclick="showMedicalFacilities('${booking.pnr}')" class="action-btn medical-btn">
                                <i class="fas fa-hospital"></i> Medical Facilities
                            </button>
                            <button onclick="shareBooking('${booking.pnr}')" class="action-btn share-btn">
                                <i class="fas fa-share-alt"></i> Share Booking
                            </button>
                        </div>
                    </div>
                    <button onclick="closeBookingConfirmationModal()" class="booking-btn" style="margin-top: 20px;">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function closeBookingConfirmationModal() {
            const modal = document.getElementById('booking-confirmation-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        // Check booking by PNR
        function checkBooking() {
            const pnr = document.getElementById('pnr-input-booking').value.trim();
            if (!pnr) {
                alert('Please enter a valid PNR number');
                return;
            }

            const booking = bookings[pnr];
            if (!booking) {
                alert('No booking found with this PNR number');
                return;
            }

            // Create and show booking details modal
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Booking Details</h2>
                    <div class="booking-details">
                        <div class="detail-group">
                            <h3>Passenger Information</h3>
                            <p><strong>Name:</strong> ${booking.name}</p>
                            <p><strong>Age:</strong> ${booking.age}</p>
                            <p><strong>Mobile:</strong> ${booking.mobile}</p>
                            <p><strong>Medical Requirements:</strong> ${booking.medicalRequirements || 'None specified'}</p>
                        </div>
                        <div class="detail-group">
                            <h3>Journey Information</h3>
                            <p><strong>Train:</strong> ${booking.train.name}</p>
                            <p><strong>Train Number:</strong> ${booking.train.number}</p>
                            <p><strong>From:</strong> ${booking.train.from}</p>
                            <p><strong>To:</strong> ${booking.train.to}</p>
                            <p><strong>Date:</strong> ${booking.date}</p>
                            <p><strong>Coach:</strong> ${booking.coach}</p>
                            <p><strong>Seat:</strong> ${booking.seat}</p>
                            <p><strong>Status:</strong> <span class="booking-status">${booking.status || 'Confirmed'}</span></p>
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button onclick="downloadBookingPDF('${pnr}')" class="action-btn">
                            <i class="fas fa-download"></i> Download Ticket
                        </button>
                        <button onclick="showMedicalFacilities('${pnr}')" class="action-btn medical-btn">
                            <i class="fas fa-hospital"></i> Medical Facilities
                        </button>
                        <button onclick="shareBooking('${pnr}')" class="action-btn share-btn">
                            <i class="fas fa-share-alt"></i> Share Booking
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function shareBooking(pnr) {
            const booking = bookings[pnr];
            if (!booking) return;

            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Share Booking</h2>
                    <div class="share-options">
                        <button onclick="shareViaWhatsApp('${pnr}')" class="share-option whatsapp">
                            <i class="fab fa-whatsapp"></i> Share via WhatsApp
                        </button>
                        <button onclick="shareViaEmail('${pnr}')" class="share-option email">
                            <i class="fas fa-envelope"></i> Share via Email
                        </button>
                        <button onclick="copyBookingDetails('${pnr}')" class="share-option copy">
                            <i class="fas fa-copy"></i> Copy Details
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function shareViaWhatsApp(pnr) {
            const booking = bookings[pnr];
            if (!booking) return;

            const message = `🚂 My RailMed Journey Details:\n\nPNR: ${booking.pnr}\nTrain: ${booking.train.name} (${booking.train.number})\nFrom: ${booking.train.from}\nTo: ${booking.train.to}\nDate: ${booking.date}\nCoach: ${booking.coach}, Seat: ${booking.seat}\n\nTrack my journey on RailMed!`;
            window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');
        }

        function shareViaEmail(pnr) {
            const booking = bookings[pnr];
            if (!booking) return;

            const subject = `RailMed Journey Details - PNR: ${booking.pnr}`;
            const body = `My RailMed Journey Details:\n\nPNR: ${booking.pnr}\nTrain: ${booking.train.name} (${booking.train.number})\nFrom: ${booking.train.from}\nTo: ${booking.train.to}\nDate: ${booking.date}\nCoach: ${booking.coach}, Seat: ${booking.seat}\n\nTrack my journey on RailMed!`;
            window.location.href = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        }

        function copyBookingDetails(pnr) {
            const booking = bookings[pnr];
            if (!booking) return;

            const details = `RailMed Journey Details:\n\nPNR: ${booking.pnr}\nTrain: ${booking.train.name} (${booking.train.number})\nFrom: ${booking.train.from}\nTo: ${booking.train.to}\nDate: ${booking.date}\nCoach: ${booking.coach}, Seat: ${booking.seat}`;
            
            navigator.clipboard.writeText(details).then(() => {
                alert('Booking details copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy text: ', err);
                alert('Failed to copy booking details. Please try again.');
            });
        }

        // Enhanced PDF generation with QR code
        function downloadBookingPDF(pnr) {
            try {
                // Check if jsPDF is loaded
                if (!window.jspdf) {
                    alert('PDF library not loaded. Please try again.');
                    return;
                }

                const { jsPDF } = window.jspdf;
                const doc = new jsPDF({
                    orientation: 'landscape',
                    unit: 'mm',
                    format: [210, 140] // Standard ticket size
                });

                const booking = bookings[pnr];
                if (!booking) {
                    alert('No booking found to download');
                    return;
                }

                // Set document properties
                doc.setProperties({
                    title: 'RailMed Booking Ticket',
                    subject: 'Train Ticket Booking Information',
                    author: 'RailMed'
                });

                // Add header
                doc.setFontSize(18);
                doc.setFont('helvetica', 'bold');
                doc.setTextColor(27, 62, 140); // Indian Railways blue
                doc.text('RailMed Booking Ticket', 105, 10, { align: 'center' });

                // Add divider line
                doc.setDrawColor(27, 62, 140);
                doc.setLineWidth(0.5);
                doc.line(10, 15, 200, 15);

                // Add logo
                const logo = new Image();
                logo.src = 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Indian_Railways.svg/640px-Indian_Railways.svg.png';
                logo.onload = function() {
                    doc.addImage(logo, 'PNG', 10, 20, 20, 20);
                    addContent();
                };

                logo.onerror = function() {
                    addContent();
                };

                function addContent() {
                    // Reset font
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    doc.setTextColor(0);

                    // Passenger Details
                    doc.setFontSize(12);
                    doc.setFont('helvetica', 'bold');
                    doc.text('Passenger Details', 10, 45);
                    doc.setFont('helvetica', 'normal');
                    doc.text(`Name: ${booking.name}`, 10, 50);
                    doc.text(`Age: ${booking.age}`, 10, 55);
                    doc.text(`Mobile: ${booking.mobile}`, 10, 60);

                    // Journey Details
                    doc.setFont('helvetica', 'bold');
                    doc.text('Journey Details', 70, 45);
                    doc.setFont('helvetica', 'normal');
                    doc.text(`Train: ${booking.train.name}`, 70, 50);
                    doc.text(`Train Number: ${booking.train.number}`, 70, 55);
                    doc.text(`From: ${booking.train.from}`, 70, 60);
                    doc.text(`To: ${booking.train.to}`, 70, 65);
                    doc.text(`Date: ${booking.date}`, 70, 70);

                    // Seat Details
                    doc.setFont('helvetica', 'bold');
                    doc.text('Seat Details', 130, 45);
                    doc.setFont('helvetica', 'normal');
                    doc.text(`Coach: ${booking.coach}`, 130, 50);
                    doc.text(`Seat: ${booking.seat}`, 130, 55);

                    // PNR Details
                    doc.setFont('helvetica', 'bold');
                    doc.text('PNR Details', 10, 80);
                    doc.setFont('helvetica', 'normal');
                    doc.text(`PNR: ${booking.pnr}`, 10, 85);

                    // Add QR Code
                    const qr = qrcode(0, 'M');
                    const ticketData = JSON.stringify({
                        pnr: booking.pnr,
                        name: booking.name,
                        train: booking.train.number,
                        date: booking.date,
                        medicalReq: booking.medicalRequirements
                    });
                    qr.addData(ticketData);
                    qr.make();
                    const qrImage = qr.createDataURL(4);
                    doc.addImage(qrImage, 'PNG', 170, 20, 30, 30);

                    // Add medical information if present
                    if (booking.medicalRequirements) {
                        doc.setFont('helvetica', 'bold');
                        doc.text('Medical Requirements', 10, 95);
                        doc.setFont('helvetica', 'normal');
                        doc.text(booking.medicalRequirements, 10, 100);
                    }

                    // Footer
                    doc.setFontSize(8);
                    doc.setTextColor(100);
                    doc.text('Thank you for choosing RailMed!', 10, 130);
                    doc.text('For any assistance, call our toll-free number: 1800-1000-200', 10, 135);

                    // Save the PDF
                    doc.save(`RailMed_Ticket_${booking.pnr}.pdf`);
                }
            } catch (error) {
                console.error('Error generating PDF:', error);
                alert('Error generating PDF. Please try again.');
            }
        }

        // Medical facilities database
        const medicalFacilities = {
            "Mumbai": [
                {
                    name: "Railway Central Hospital",
                    distance: "0.5 km from station",
                    type: "Railway Hospital",
                    services: ["Emergency", "OPD", "Pharmacy", "Ambulance"],
                    contact: "022-23456789",
                    address: "Near Mumbai Central Station"
                },
                {
                    name: "City General Hospital",
                    distance: "2 km from station",
                    type: "Government Hospital",
                    services: ["24x7 Emergency", "ICU", "Pharmacy"],
                    contact: "022-23457890",
                    address: "M.G. Road, Mumbai"
                }
            ],
            "Delhi": [
                {
                    name: "Northern Railway Central Hospital",
                    distance: "1 km from station",
                    type: "Railway Hospital",
                    services: ["Emergency", "OPD", "Specialized Care"],
                    contact: "011-23456789",
                    address: "Near New Delhi Railway Station"
                },
                {
                    name: "AIIMS Delhi",
                    distance: "5 km from station",
                    type: "Government Hospital",
                    services: ["24x7 Emergency", "Super Specialty", "Trauma Center"],
                    contact: "011-23457890",
                    address: "AIIMS Campus, New Delhi"
                }
            ],
            "Chennai": [
                {
                    name: "Southern Railway Hospital",
                    distance: "0.8 km from station",
                    type: "Railway Hospital",
                    services: ["Emergency", "OPD", "Pharmacy"],
                    contact: "044-23456789",
                    address: "Near Chennai Central"
                },
                {
                    name: "Apollo Chennai",
                    distance: "3 km from station",
                    type: "Private Hospital",
                    services: ["24x7 Emergency", "Multi Specialty", "International Patients"],
                    contact: "044-23457890",
                    address: "Greams Road, Chennai"
                }
            ],
            "Bangalore": [
                {
                    name: "Railway Referral Hospital",
                    distance: "1.2 km from station",
                    type: "Railway Hospital",
                    services: ["Emergency", "OPD", "Diagnostics"],
                    contact: "080-23456789",
                    address: "Near Bangalore City Station"
                },
                {
                    name: "Manipal Hospital",
                    distance: "4 km from station",
                    type: "Private Hospital",
                    services: ["24x7 Emergency", "Multi Specialty", "Advanced Care"],
                    contact: "080-23457890",
                    address: "HAL Airport Road, Bangalore"
                }
            ]
        };

        // Add styles for medical facilities
        const medicalStyles = document.createElement('style');
        medicalStyles.textContent = `
            .medical-facilities {
                padding: 1rem;
            }
            
            .facility-card {
                background: white;
                padding: 1rem;
                border-radius: 8px;
                margin-bottom: 1rem;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                border-left: 4px solid var(--primary-blue);
            }
            
            .facility-card h3 {
                color: var(--primary-blue);
                margin-bottom: 0.5rem;
            }
            
            .facility-type {
                display: inline-block;
                padding: 0.25rem 0.5rem;
                border-radius: 4px;
                font-size: 0.8rem;
                margin-bottom: 0.5rem;
            }
            
            .facility-type.railway {
                background: #e3f2fd;
                color: #1565c0;
            }
            
            .facility-type.government {
                background: #e8f5e9;
                color: #2e7d32;
            }
            
            .facility-type.private {
                background: #fff3e0;
                color: #ef6c00;
            }
            
            .facility-distance {
                color: #666;
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            .facility-services {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                margin: 0.5rem 0;
            }
            
            .service-tag {
                background: #f5f5f5;
                padding: 0.25rem 0.5rem;
                border-radius: 4px;
                font-size: 0.8rem;
            }
            
            .facility-contact {
                margin-top: 0.5rem;
                display: flex;
                gap: 1rem;
            }
            
            .facility-contact a {
                color: var(--primary-blue);
                text-decoration: none;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            
            .facility-contact a:hover {
                text-decoration: underline;
            }
            
            .no-facilities {
                text-align: center;
                padding: 2rem;
                color: #666;
            }
            
            .medical-btn {
                background: #4CAF50;
            }
            
            .medical-btn:hover {
                background: #45a049;
            }
        `;
        document.head.appendChild(medicalStyles);

        function showMedicalFacilities(pnr) {
            const booking = bookings[pnr];
            if (!booking) return;

            const destination = booking.train.to;
            const facilities = medicalFacilities[destination] || [];

            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2>Medical Facilities in ${destination}</h2>
                    <div class="medical-facilities">
                        ${facilities.length ? facilities.map(facility => `
                            <div class="facility-card">
                                <h3>${facility.name}</h3>
                                <span class="facility-type ${facility.type.toLowerCase().replace(' ', '-')}">
                                    ${facility.type}
                                </span>
                                <div class="facility-distance">
                                    <i class="fas fa-map-marker-alt"></i> ${facility.distance}
                                </div>
                                <div class="facility-services">
                                    ${facility.services.map(service => `
                                        <span class="service-tag">${service}</span>
                                    `).join('')}
                                </div>
                                <div class="facility-contact">
                                    <a href="tel:${facility.contact}" class="contact-phone">
                                        <i class="fas fa-phone"></i> ${facility.contact}
                                    </a>
                                    <a href="https://maps.google.com/?q=${encodeURIComponent(facility.name + ' ' + facility.address)}" 
                                       target="_blank" class="contact-map">
                                        <i class="fas fa-directions"></i> Get Directions
                                    </a>
                                </div>
                            </div>
                        `).join('') : `
                            <div class="no-facilities">
                                <i class="fas fa-info-circle"></i>
                                <p>No medical facilities information available for ${destination}</p>
                                <p>Please contact our helpline: 1800-1000-200</p>
                            </div>
                        `}
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // Dummy doctor data
        const doctors = [
            {
                id: 1,
                name: "Dr. Rajesh Kumar",
                mobile: "9876543210",
                specialization: "General Physician",
                trainNumber: "12345",
                availability: true,
                experience: "15 years",
                boggy: "A1",
                seatNumber: "23"
            },
            {
                id: 2,
                name: "Dr. Priya Singh",
                mobile: "9876543211",
                specialization: "Emergency Medicine",
                trainNumber: "12346",
                availability: true,
                experience: "12 years",
                boggy: "B2",
                seatNumber: "45"
            },
            {
                id: 3,
                name: "Dr. Amit Patel",
                mobile: "9876543212",
                specialization: "Cardiologist",
                trainNumber: "12347",
                availability: false,
                experience: "20 years",
                boggy: "A2",
                seatNumber: "12"
            },
            {
                id: 4,
                name: "Dr. Sneha Reddy",
                mobile: "9876543213",
                specialization: "Pediatrician",
                trainNumber: "12348",
                availability: true,
                experience: "10 years",
                boggy: "C1",
                seatNumber: "32"
            },
            {
                id: 5,
                name: "Dr. Mohammed Khan",
                mobile: "9876543214",
                specialization: "General Surgeon",
                trainNumber: "12349",
                availability: true,
                experience: "18 years",
                boggy: "B1",
                seatNumber: "15"
            }
        ];

        function checkDoctor() {
            const pnrInput = document.getElementById('pnr-input').value;
            const resultDiv = document.getElementById('result');

            // Validate PNR
            if (pnrInput.length !== 10 || !/^\d+$/.test(pnrInput)) {
                resultDiv.innerHTML = `<p style="color: var(--accent-red);">Please enter a valid 10-digit PNR number</p>`;
                return;
            }

            // Find the passenger's booking
            const passengerBooking = bookings[pnrInput];
            if (!passengerBooking) {
                resultDiv.innerHTML = `<p style="color: var(--accent-red);">No booking found for this PNR</p>`;
                return;
            }

            // Get the train number and date from passenger's booking
            const trainNumber = passengerBooking.trainNumber;
            const travelDate = passengerBooking.date;
            const isDoctor = passengerBooking.occupation === 'doctor';

            // Find all bookings for doctors on the same train and date
            const doctorBookings = Object.values(bookings).filter(booking => 
                booking.trainNumber === trainNumber && 
                booking.date === travelDate &&
                booking.occupation === 'doctor' &&
                booking.pnr !== pnrInput // Exclude the checking doctor if they are one
            );

            if (doctorBookings.length > 0) {
                const doctor = doctorBookings[0]; // Get the first doctor
                resultDiv.innerHTML = `
                    <div class="doctor-info">
                        <p style="color: #28a745; font-weight: bold; margin-bottom: 10px;">
                            A doctor is traveling on your train!
                        </p>
                        <p><strong>Doctor:</strong> ${doctor.name}</p>
                        <p><strong>Mobile:</strong> ${doctor.mobile}</p>
                        <p><strong>Location:</strong> Coach ${doctor.coach}, Seat ${doctor.seat}</p>
                        <p style="margin-top: 10px;">
                            For immediate assistance, call our toll-free number: 
                            <span style="font-weight: bold;">1800-1000-200</span>
                        </p>
                    </div>`;
            } else {
                resultDiv.innerHTML = `
                    <div class="doctor-info">
                        <p style="color: var(--accent-red); font-weight: bold; margin-bottom: 10px;">
                            We apologize, but no doctors are currently traveling on your train.
                        </p>
                        <p>Please call our emergency toll-free number for assistance: 
                            <span style="font-weight: bold;">1800-1000-200</span>
                        </p>
                    </div>`;
            }
        }

        // Add styles for doctor info
        const doctorStyles = document.createElement('style');
        doctorStyles.textContent = `
            .doctor-info {
                background: white;
                padding: 1.5rem;
                border-radius: 8px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            }

            .doctor-details {
                background: #f8f9fa;
                padding: 1rem;
                border-radius: 6px;
                margin: 1rem 0;
            }

            .doctor-details p {
                margin: 0.5rem 0;
            }

            .emergency-info {
                background: #fff3e0;
                padding: 1rem;
                border-radius: 6px;
                margin-top: 1rem;
            }

            .emergency-info ul {
                margin: 0.5rem 0;
                padding-left: 1.5rem;
            }

            .emergency-info li {
                margin: 0.3rem 0;
            }
        `;
        document.head.appendChild(doctorStyles);

        // Chatbot FAQ database
        const faqDatabase = {
            // Greetings and Pleasantries
            "hello": "Hello! How can I help you today?",
            "hi": "Hi! How can I assist you with RailMed services?",
            "hey": "Hey there! What can I do for you today?",
            "good morning": "Good morning! How may I assist you?",
            "good afternoon": "Good afternoon! How can I help you today?",
            "good evening": "Good evening! What can I do for you?",
            
            // Booking Related
            "book": "To book a train ticket:\n1. Click 'Book Train Ticket' in the navigation menu\n2. Enter your journey details (source, destination, date)\n3. Select your preferred train\n4. Choose seat/berth preference\n5. Fill passenger details\n6. Make payment\n7. Receive e-ticket with PNR\n\nNeed help with booking? Just ask!",
            "ticket": "Booking a ticket is easy:\n1. Use the 'Book Train Ticket' button\n2. Select route and date\n3. Choose from available trains\n4. Select seats/berths\n5. Add passenger information\n6. Complete payment\n\nYour e-ticket and PNR will be sent instantly!",
            "booking": "Train booking process:\n1. Click 'Book Train Ticket'\n2. Enter travel details\n3. Select train and class\n4. Choose seats\n5. Add passenger info\n6. Pay securely\n\nBooking support available 24/7!",
            
            // MedConnect Related
            "medconnect": "MedConnect is our innovative passenger support network that:\n1. Connects you with fellow travelers who can help with medical needs\n2. Lets you share or request medical resources\n3. Provides real-time emergency assistance\n4. Creates a supportive community during your journey\n\nJoin now through the MedConnect tab!",
            "medical help": "Need medical help during journey?\n1. Use MedConnect to find nearby passengers with medical skills\n2. Request specific medical supplies\n3. Get real-time emergency assistance\n4. Connect with train's medical staff\n\nAccess MedConnect from the main menu!",
            "medical resources": "Share or find medical resources through MedConnect:\n- First aid supplies\n- Common medications\n- Medical equipment\n- Emergency contacts\n- Medical knowledge\n\nHelp create a safer journey for everyone!",
            
            // AI and Health Features
            "analyzer": "Our AI Symptom Analyzer helps you:\n1. Describe symptoms through voice or text\n2. Get instant AI-powered analysis\n3. Receive personalized recommendations\n4. Connect with MedConnect if needed\n\nTry it now in the Health Analyzer section!",

            "symptoms": "Check your symptoms easily:\n1. Use voice commands to describe how you feel\n2. Our AI understands natural language\n3. Get instant analysis and severity score\n4. Find help through MedConnect if needed\n\nAccess via the Health Analyzer tab!",

            // MedConnect Integration
            "medconnect": "MedConnect is our innovative passenger support network that:\n1. Connects you with fellow travelers who can help\n2. Integrates with our AI Symptom Analyzer\n3. Provides real-time emergency assistance\n4. Creates a supportive medical community\n\nJoin now through the MedConnect tab!",

            "medical help": "Multiple ways to get medical help:\n1. Use AI Symptom Analyzer for instant assessment\n2. Connect with trained passengers via MedConnect\n3. Get real-time emergency assistance\n4. Access professional medical staff\n\nYour health is our priority!",

            "emergency": "For medical emergencies:\n1. Use Emergency Button in MedConnect\n2. AI system will assess severity\n3. Alert nearby medical professionals\n4. Get instant support from community\n5. Automatic staff notification\n\nHelp is always available!",

            // Services and Features
            "services": "RailMed's integrated services:\n- Voice-enabled AI Symptom Analysis\n- Real-time Medical Community (MedConnect)\n- Emergency Response System\n- Professional Healthcare Support\n- Medicine Delivery\n\nAll accessible from main menu!",

            // Help and Support
            "help": "I can help you with:\n- AI symptom checking\n- Finding medical help through MedConnect\n- Emergency assistance\n- Medicine delivery\n- Health monitoring\n- Service information\n\nJust ask your question!"
        };

        function toggleChat() {
            const chatbot = document.getElementById('chatbot');
            chatbot.style.display = chatbot.style.display === 'none' || chatbot.style.display === '' ? 'flex' : 'none';
            if (chatbot.style.display === 'flex') {
                document.getElementById('userInput').focus();
                if (document.getElementById('chatMessages').children.length === 0) {
                    addBotMessage("Hello! I'm your RailMed Assistant. How can I help you today?\nType 'help' to see what I can do!");
                }
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const message = input.value.trim().toLowerCase();
            
            if (message === '') return;

            // Add user message
            addUserMessage(input.value);
            input.value = '';

            // Find best matching response
            let bestMatch = findBestMatch(message);
            
            // Add bot response
            setTimeout(() => {
                addBotMessage(bestMatch);
            }, 500);
        }

        function findBestMatch(message) {
            // Simple keyword matching
            for (let key in faqDatabase) {
                if (message.includes(key)) {
                    return faqDatabase[key];
                }
            }
            
            // Default response if no match found
            return "I'm not sure about that. You can ask me about our services, registration process, emergency procedures, or type 'help' for more options.";
        }

        function addUserMessage(message) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.className = 'message user-message';
            messageElement.textContent = message;
            messagesDiv.appendChild(messageElement);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function addBotMessage(message) {
            const messagesDiv = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.className = 'message bot-message';
            messageElement.textContent = message;
            messagesDiv.appendChild(messageElement);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }
    </script>
    <script>
        // Check if user is already authenticated for telemedicine
        document.getElementById('teleMedBtn').addEventListener('click', function(e) {
            const userToken = sessionStorage.getItem('userToken');
            if (userToken) {
                // If already authenticated, go directly to telemedicine
                e.preventDefault();
                window.location.href = 'telemedicine.html';
            }
            // If not authenticated, default behavior will take them to auth.html
        });
    </script>
    <script>
        document.querySelector('.nav-toggle').addEventListener('click', function() {
            document.querySelector('nav ul').classList.toggle('show');
        });

        // Toggle dropdown on mobile
        document.querySelector('.dropdown-toggle').addEventListener('click', function(e) {
            e.preventDefault();
            if (window.innerWidth <= 900) {
                this.parentElement.classList.toggle('show');
            }
        });

        // Close menu when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('nav')) {
                document.querySelector('nav ul').classList.remove('show');
                document.querySelector('.dropdown').classList.remove('show');
            }
        });
    </script>
</body>
</html>
